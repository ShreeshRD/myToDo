
> todoist@0.1.0 test
> react-scripts test --coverage --watchAll=false --watchAll=false

PASS src/utils/dateUtils.test.js
PASS src/utils/taskUtils.test.js
PASS src/components/Dropdown.test.js
PASS src/components/CustomCheckbox.test.js
PASS src/components/DateComponent.test.js
PASS src/components/CreateTaskPopup.test.js
FAIL src/integration.test.js
  ΓùÅ Console

    console.log
      taskManagement in Context: undefined

      at TaskProvider (src/contexts/TaskContext.js:12:13)

    console.log
      taskManagement in Context: undefined

      at TaskProvider (src/contexts/TaskContext.js:12:13)

  ΓùÅ Integration Tests ΓÇ║ full task lifecycle: create, view, and complete a task

    TypeError: Cannot read properties of undefined (reading 'format')

       6 | function Today() {
       7 |     const { showPopup, darkMode, callPopup, updateTask, removeTask, handleDragEnd, taskDays, overdueTasks, startDate } = useTasks();
    >  8 |     const date = startDate.format('YYYY-MM-DD');
         |                            ^
       9 |     const tasks = taskDays[date] || [];
      10 |     const sortedTasks = tasks.sort((a, b) => a.dayOrder - b.dayOrder);
      11 |

      at Today (src/Today.js:8:28)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:860:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/integration.test.js:90:11)

PASS src/App.test.js
  ΓùÅ Console

    console.log
      taskManagement in Context: {
        taskDays: [],
        setTaskDays: [Function: bound dispatchSetState],
        completedTasks: {},
        setCompletedTasks: [Function: bound dispatchSetState],
        overdueTasks: { overdue: [] },
        setOverdueTasks: [Function: bound dispatchSetState],
        startDate: M {
          '$L': 'en',
          '$d': 2025-11-23T03:05:27.410Z,
          '$y': 2025,
          '$M': 10,
          '$D': 23,
          '$W': 0,
          '$H': 8,
          '$m': 35,
          '$s': 27,
          '$ms': 410,
          '$x': {},
          '$isDayjsObject': true
        },
        setStartDate: [Function: bound dispatchSetState],
        completedDate: M {
          '$L': 'en',
          '$d': 2025-11-16T03:05:27.410Z,
          '$y': 2025,
          '$M': 10,
          '$D': 16,
          '$W': 0,
          '$H': 8,
          '$m': 35,
          '$s': 27,
          '$ms': 410,
          '$x': {},
          '$isDayjsObject': true
        },
        setCompletedDate: [Function: bound dispatchSetState],
        fetchTasks: [AsyncFunction: fetchTasks],
        addToFrontend: [Function: addToFrontend],
        updateTask: [AsyncFunction: updateTask],
        removeTask: [AsyncFunction: removeTask],
        handleDragEnd: [Function: handleDragEnd],
        updateBackend: [AsyncFunction: updateBackend],
        addNextRepeat: [AsyncFunction: addNextRepeat]
      }

      at TaskProvider (src/contexts/TaskContext.js:12:13)

-----------------------|---------|----------|---------|---------|---------------------------------------------------------------------
File                   | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                   
-----------------------|---------|----------|---------|---------|---------------------------------------------------------------------
All files              |   41.11 |    28.45 |   35.93 |      42 |                                                                     
 src                   |   26.25 |       20 |   23.07 |   27.63 |                                                                     
  App.js               |     100 |    43.75 |      50 |     100 | 39-42,58-88                                                         
  CalendarView.js      |       0 |        0 |       0 |       0 | 8-40                                                                
  ComingSoon.js        |       0 |      100 |       0 |       0 | 9                                                                   
  Completed.js         |       0 |        0 |       0 |       0 | 7-19                                                                
  Today.js             |   33.33 |        0 |      50 |      40 | 9-12                                                                
  Upcoming.js          |   88.88 |    66.66 |      75 |     100 | 15-16                                                               
  index.js             |       0 |      100 |     100 |       0 | 8-20                                                                
  reportWebVitals.js   |       0 |        0 |       0 |       0 | 1-8                                                                 
  service.js           |      25 |        0 |   16.66 |      25 | 8-12,17-28,33-47,52-57                                              
 src/components        |   68.99 |    42.35 |   38.88 |   69.53 |                                                                     
  CreateTaskPopup.js   |   70.21 |    37.73 |   34.78 |   70.96 | 57-59,64-69,101-107,116,125-126,133,137,141,145-150,155-157,201-204 
  CustomCheckbox.js    |     100 |      100 |     100 |     100 |                                                                     
  DateComponent.js     |     100 |    66.66 |     100 |     100 | 12                                                                  
  Dropdown.js          |     100 |      100 |     100 |     100 |                                                                     
  ToDoDay.js           |   55.55 |    31.81 |   22.22 |   55.55 | 30-33,47-94                                                         
 src/components/layout |   27.77 |     62.5 |   18.75 |   31.25 |                                                                     
  Header.js            |   16.66 |       75 |   16.66 |      25 | 18-20                                                               
  Sidebar.js           |   33.33 |    58.33 |      20 |   33.33 | 18-47                                                               
 src/contexts          |      50 |        0 |      50 |      48 |                                                                     
  TaskContext.js       |      50 |        0 |      50 |      48 | 19-21,25-36                                                         
 src/hooks             |   18.78 |      4.1 |   30.55 |   19.37 |                                                                     
  useTaskManagement.js |   11.11 |        0 |   13.79 |   11.49 | 23-69,75-87,98-123,128-131,136-171,176-209,214-281                  
  useUIState.js        |     100 |       50 |     100 |     100 | 6-14                                                                
 src/utils             |     100 |      100 |     100 |     100 |                                                                     
  dateUtils.js         |     100 |      100 |     100 |     100 |                                                                     
  taskUtils.js         |     100 |      100 |     100 |     100 |                                                                     
-----------------------|---------|----------|---------|---------|---------------------------------------------------------------------

Test Suites: 1 failed, 7 passed, 8 total
Tests:       1 failed, 35 passed, 36 total
Snapshots:   0 total
Time:        7.575 s
Ran all test suites.
